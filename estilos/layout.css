/* App-specific layout and responsive rules */
* { margin: 0; padding: 0; box-sizing: border-box; }

body { font-family: var(--font-family-base); background: var(--color-background); color: var(--color-text); overflow: hidden; height: 100vh; width: 100vw; }

#arvore { width: 100vw; height: 100vh; background: var(--color-surface); cursor: grab; display: block; }
#arvore:active { cursor: grabbing; }

#painel { position: absolute; top: var(--space-16); left: var(--space-16); background: var(--color-surface); padding: var(--space-20); border-radius: var(--radius-lg); border: 1px solid var(--color-border); backdrop-filter: blur(10px); min-width: 320px; max-height: 90vh; overflow-y: auto; box-shadow: var(--shadow-lg); font-size: var(--font-size-sm); z-index: 100; }

#painel h2 { margin-bottom: var(--space-16); font-size: var(--font-size-xl); border-bottom: 2px solid var(--color-primary); padding-bottom: var(--space-10); color: var(--color-primary); font-weight: var(--font-weight-semibold); }

.stat-group { margin-bottom: var(--space-20); padding: var(--space-12); background: rgba(var(--color-teal-500-rgb), 0.08); border-left: 3px solid var(--color-primary); border-radius: var(--radius-base); }
.stat-group > label:first-child { display: block; margin-bottom: var(--space-10); color: var(--color-primary); font-weight: var(--font-weight-bold); }
.stat-group small { color: var(--color-text-secondary); line-height: var(--line-height-normal); }

.stat { display: flex; justify-content: space-between; align-items: center; margin: var(--space-8) 0; font-size: var(--font-size-sm); }
.stat input { width: 70px; padding: var(--space-6); border: 1px solid var(--color-border); border-radius: var(--radius-sm); background: var(--color-surface); color: var(--color-primary); text-align: center; font-weight: var(--font-weight-bold); font-family: var(--font-family-base); transition: all var(--duration-normal) var(--ease-standard); }
.stat input:focus { outline: var(--focus-outline); background: var(--color-secondary); border-color: var(--color-primary); box-shadow: var(--focus-ring); }

.tp-display { font-size: 28px; font-weight: var(--font-weight-bold); color: var(--color-primary); text-align: center; padding: var(--space-10); background: rgba(var(--color-teal-500-rgb), 0.1); border-radius: var(--radius-base); border: 2px solid var(--color-primary); }

#tiers-progress { display: flex; flex-direction: column; gap: var(--space-10); }
.tier-progress { display: flex; flex-direction: column; gap: var(--space-4); padding: var(--space-8); background: var(--color-secondary); border-radius: var(--radius-base); font-size: var(--font-size-xs); }
.barra { width: 100%; height: 8px; background: var(--color-secondary); border-radius: var(--radius-sm); overflow: hidden; border: 1px solid var(--color-border); }
.barra .fill { height: 100%; background: var(--color-success); transition: width 0.5s var(--ease-standard); }

.btn { width: 100%; padding: var(--space-10); margin: var(--space-6) 0; border: none; border-radius: var(--radius-base); font-size: var(--font-size-sm); font-weight: var(--font-weight-bold); font-family: var(--font-family-base); cursor: pointer; transition: all var(--duration-normal) var(--ease-standard); text-transform: uppercase; letter-spacing: 0.5px; }
.btn-info { background: var(--color-primary); color: var(--color-btn-primary-text); }
.btn-info:hover { background: var(--color-primary-hover); box-shadow: var(--shadow-md); transform: translateY(-2px); }
.btn-info:active { background: var(--color-primary-active); }
.btn-export { background: var(--color-primary); color: var(--color-btn-primary-text); }
.btn-export:hover { background: var(--color-primary-hover); box-shadow: var(--shadow-md); transform: translateY(-2px); }
.btn-export:active { background: var(--color-primary-active); }
.btn-danger { background: var(--color-error); color: var(--color-btn-primary-text); }
.btn-danger:hover { background: var(--color-error); box-shadow: var(--shadow-md); transform: translateY(-2px); opacity: 0.9; }
.btn:active { transform: translateY(0); box-shadow: var(--shadow-sm); }
.btn:focus-visible { outline: var(--focus-outline); box-shadow: var(--focus-ring); }

#tooltip { display: none; position: fixed; background: var(--color-surface); color: var(--color-text); padding: var(--space-12); border-radius: var(--radius-base); border: 1px solid var(--color-border); font-size: var(--font-size-sm); max-width: 250px; z-index: 1000; pointer-events: none; white-space: pre-wrap; word-break: break-word; box-shadow: var(--shadow-lg); backdrop-filter: blur(10px); animation: fadeIn 0.2s var(--ease-standard); }
@keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

.skill-circle { cursor: pointer; transition: all var(--duration-normal) var(--ease-standard); filter: drop-shadow(0 0 5px rgba(0,0,0,0.2)); }
.skill-circle:hover { filter: drop-shadow(0 0 15px rgba(var(--color-teal-500-rgb), 0.6)); }

#painel::-webkit-scrollbar { width: 8px; }
#painel::-webkit-scrollbar-track { background: var(--color-secondary); border-radius: var(--radius-md); }
#painel::-webkit-scrollbar-thumb { background: var(--color-primary); border-radius: var(--radius-md); opacity: 0.6; }
#painel::-webkit-scrollbar-thumb:hover { opacity: 1; }

/* Responsive tweaks */
@media (max-width: 768px) {
  #painel { min-width: 280px; font-size: var(--font-size-xs); }
  #painel h2 { font-size: var(--font-size-lg); }
  .stat input { width: 60px; font-size: var(--font-size-xs); }
  .btn { font-size: var(--font-size-xs); padding: var(--space-8); }
  #tooltip { max-width: 200px; font-size: var(--font-size-xs); }
}

@media (max-width: 480px) {
  body { overflow-y: auto; height: auto; }
  #arvore { width: 100vw; min-height: 100vh; height: auto; }
  #painel { position: relative; top: 0; left: 0; min-width: 100%; max-height: none; border-radius: 0; padding: var(--space-16); margin: 0; }
  #painel h2 { font-size: var(--font-size-md); margin-bottom: var(--space-12); }
  .stat-group { padding: var(--space-10); margin-bottom: var(--space-16); }
  .stat { font-size: 11px; margin: var(--space-6) 0; }
  .stat input { width: 50px; padding: var(--space-4); font-size: 11px; }
  .tp-display { font-size: 24px; padding: var(--space-8); }
  #tiers-progress { gap: var(--space-8); }
  .tier-progress { padding: var(--space-6); font-size: 10px; }
  .btn { padding: var(--space-8); font-size: 11px; margin: var(--space-4) 0; }
  #tooltip { max-width: 180px; font-size: 11px; padding: var(--space-10); }
  .skill-circle:hover { r: 35; }
}

/* Tier navigation and layout */
:root { --cor-primaria: var(--color-primary); --cor-secundaria: var(--color-primary-hover); --cor-sucesso: var(--color-success); --cor-aviso: var(--color-warning); --cor-erro: var(--color-error); --cor-fundo: var(--color-background); --cor-fundo-claro: var(--color-surface); }

.container-principal { display: flex; height: calc(100vh - 80px); }
#arvore { flex: 1; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); cursor: grab; border-right: 1px solid var(--color-border); }
#arvore:active { cursor: grabbing; }
#painel { width: 350px; overflow-y: auto; background: var(--color-surface); border-left: 1px solid var(--color-border); padding: var(--space-20); }

.tier-navigation { position: fixed; bottom: 0; left: 0; right: 0; height: 80px; background: var(--color-surface); border-top: 1px solid var(--color-border); display: flex; align-items: center; justify-content: center; box-shadow: 0 -4px 12px rgba(0,0,0,0.1); z-index: 100; }
.tier-buttons { display: flex; gap: var(--space-12); flex-wrap: wrap; justify-content: center; padding: var(--space-16); max-width: 100%; }
.tier-btn { padding: var(--space-10) var(--space-16); border: 2px solid var(--color-border); border-radius: var(--radius-base); background: var(--color-background); color: var(--color-text); font-weight: var(--font-weight-semibold); cursor: pointer; transition: all var(--duration-normal) var(--ease-standard); font-size: var(--font-size-sm); }
.tier-btn:hover { border-color: var(--color-primary); background: rgba(var(--color-teal-500-rgb), 0.1); }
.tier-btn.ativo { background: var(--color-primary); color: var(--color-btn-primary-text); border-color: var(--color-primary); box-shadow: 0 4px 12px rgba(var(--color-teal-500-rgb), 0.3); }
.tier-btn.desbloqueado { border-color: var(--color-success); }
.tier-btn.desbloqueado:not(.ativo) { background: rgba(var(--color-success-rgb), 0.1); }
.tier-btn.bloqueado { border-color: var(--color-error); opacity: 0.6; cursor: not-allowed; }
.tier-btn.bloqueado:hover { border-color: var(--color-error); background: rgba(var(--color-error-rgb), 0.05); }

@media (max-width: 1024px) { #painel { width: 300px; padding: var(--space-16); } .tier-btn { padding: var(--space-8) var(--space-12); font-size: var(--font-size-xs); } }

@media (max-width: 768px) { .container-principal { flex-direction: column; height: calc(100vh - 120px); } #arvore { flex: 1; border-right: none; border-bottom: 1px solid var(--color-border); } #painel { width: 100%; height: 40vh; border-left: none; border-top: 1px solid var(--color-border); overflow-y: auto; } .tier-navigation { height: 120px; } .tier-buttons { flex-wrap: wrap; gap: var(--space-8); } }
